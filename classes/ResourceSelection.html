<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ResourceSelection - DeviceJS Client API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="DeviceJS Client API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/AsyncMutex.html">AsyncMutex</a></li>
                                <li><a href="../classes/DeviceJSPeer.html">DeviceJSPeer</a></li>
                                <li><a href="../classes/ResourceSelection.html">ResourceSelection</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>ResourceSelection Class</h1>
<div class="box meta">


        <div class="foundat">
            Defined in: <a href="../files/src_core_peer.js.html#l1414"><code>src&#x2F;core&#x2F;peer.js:1414</code></a>
        </div>


</div>


<div class="box intro">
    <p>A resource selection object builds all its functionality
on the APIs provided by the DeviceJSPeer object that
it is tied to. A resource selection represents some
selection or set of resources which are to be monitored or
manipulated. It is a more convenient interface than
the raw API provided by DeviceJSPeer for performing these
tasks and is the primary method by which user code should
operate. Keep in mind that this object should be created
through the dev$.select functions and not by invoking
its constructor directly</p>

</div>

    <div class="constructor">
        <h2>Constructor</h2>
<div id="method_ResourceSelection" class="method item">
    <h3 class="name"><code>ResourceSelection</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>peer</code>
                </li>
                <li class="arg">
                        <code>selection</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1414"><code>src&#x2F;core&#x2F;peer.js:1414</code></a>
        </p>



    </div>

    <div class="description">
        
    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">peer</code>
                        <span class="type"><a href="../classes/DeviceJSPeer.html" class="crosslink">DeviceJSPeer</a></span>


                    <div class="param-description">
                        <p>The DeviceJS peer that this resource selection
is tied to.</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">selection</code>
                        <span class="type">String</span>


                    <div class="param-description">
                         
                    </div>

                </li>
            </ul>
        </div>



</div>
    </div>

<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
            <li class="api-class-tab events"><a href="#events">Events</a></li>
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                            <li class="index-item method">
                                <a href="#method_call">call</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_discover">discover</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_get">get</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_listResources">listResources</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_set">set</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_stopDiscovering">stopDiscovering</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_subscribeToEvent">subscribeToEvent</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_subscribeToState">subscribeToState</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_unsubscribe">unsubscribe</a>

                            </li>
                    </ul>
                </div>



                <div class="index-section events">
                    <h3>Events</h3>

                    <ul class="index-list events">
                            <li class="index-item event">
                                <a href="#event_discover">discover</a>

                            </li>
                            <li class="index-item event">
                                <a href="#event_event">event</a>

                            </li>
                            <li class="index-item event">
                                <a href="#event_state">state</a>

                            </li>
                    </ul>
                </div>
        </div>

            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

<div id="method_call" class="method item">
    <h3 class="name"><code>call</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>command</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1783"><code>src&#x2F;core&#x2F;peer.js:1783</code></a>
        </p>



    </div>

    <div class="description">
        <p>Execute a certain command. All parameters
after the first parameter are considered
command arguments and are passed to the command
as an array.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">command</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The name of the command to execute
on this selection</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
                    <p>This is the promise returned by DeviceJSPeer's
sendResourceCommand method</p>

            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>dev$.selectByType('Examples/ExampleLight').call('on').then(function() {
    console.log('Turned on all ExampleLight lights');
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_discover" class="method item">
    <h3 class="name"><code>discover</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code class="optional">[localOnly]</code>
                </li>
            </ul><span class="paren">)</span>
        </div>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1698"><code>src&#x2F;core&#x2F;peer.js:1698</code></a>
        </p>



    </div>

    <div class="description">
        <p>This initiates the discovery process for resources
matching this selection set. If any resources are
already registered matching this selection then those
will be discovered. After that, any new resource
joining this set will be discovered.</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name optional">[localOnly]</code>
                        <span class="type">Boolean</span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>


                    <div class="param-description">
                        <p>This defaults to false. If true
only resources registered to peers connected directly to the
same DeviceJS server will be discovered.</p>

                    </div>

                </li>
            </ul>
        </div>



        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>var lights = dev$.selectByType('Examples/ExampleLight');
lights.discover();
lights.on('discover', function(resourceID, resourceInfo) {
    // resourceID = light1
    // resourceInfo = { reachable: true, registered: true, type: 'Examples/ExampleLight' }
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_get" class="method item">
    <h3 class="name"><code>get</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>property</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1840"><code>src&#x2F;core&#x2F;peer.js:1840</code></a>
        </p>



    </div>

    <div class="description">
        <p>Get a property of all resources in
this resource selection</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">property</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The name of the property</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
                    <p>This is the promise returned by DeviceJSPeer's
getResourceState method</p>

            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>dev$.selectByType('Examples/ExampleLight').get('brightness').then(function(responses) {
    // responses =
    // {
    //     light1: { receivedResponse: true, response: 0.64 }
    // }
});</code></pre>

            </div>
        </div>
</div>
<div id="method_listResources" class="method item">
    <h3 class="name"><code>listResources</code></h3>

        <span class="paren">()</span>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1671"><code>src&#x2F;core&#x2F;peer.js:1671</code></a>
        </p>



    </div>

    <div class="description">
        <p>This method wraps the listResources method
defined by DeviceJSPeer. It lists all the resources
in this resource selection.</p>

    </div>


        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
                    <p>This is the promise returned by DeviceJSPeer's
listResources method.</p>

            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>dev$.selectByType('Examples/ExampleLight').listResources().then(function(resources) {
    // {
    //     light1: {
    //         reachable: true,
    //         registered: true,
    //         type: 'Examples/ExampleLight'
    //     }
    // }
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_set" class="method item">
    <h3 class="name"><code>set</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>property</code>
                </li>
                <li class="arg">
                        <code>value</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1813"><code>src&#x2F;core&#x2F;peer.js:1813</code></a>
        </p>



    </div>

    <div class="description">
        <p>Set a property of all resources in
this resource selection to some value</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">property</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The name of the property</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">value</code>
                        <span class="type">Object</span>


                    <div class="param-description">
                        <p>The value to set it to</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
                    <p>This is the promise returned by DeviceJSPeer's
setResourceState method</p>

            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>dev$.selectByType('Examples/ExampleLight').set('brightness', 0.5).then(function() {
    console.log('Set all ExampleLight lights\' brightness to 50%'');
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_stopDiscovering" class="method item">
    <h3 class="name"><code>stopDiscovering</code></h3>

        <span class="paren">()</span>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1761"><code>src&#x2F;core&#x2F;peer.js:1761</code></a>
        </p>



    </div>

    <div class="description">
        <p>Stops the discovery process</p>

    </div>




        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>var lights = dev$.selectByType('Examples/ExampleLight');
lights.discover();
lights.on('discover', function(resourceID, resourceInfo) {
    // resourceID = light1
    // resourceInfo = { reachable: true, registered: true, type: 'Examples/ExampleLight' }
    lights.stopDiscovering(); // this selection will no longer emit discover events
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_subscribeToEvent" class="method item">
    <h3 class="name"><code>subscribeToEvent</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>eventType</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1602"><code>src&#x2F;core&#x2F;peer.js:1602</code></a>
        </p>



    </div>

    <div class="description">
        <p>This method wraps the subscribeToResourceEvent method
defined by DeviceJSPeer</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">eventType</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The type of event to subscribe to</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>var motionSensors = dev$.selectByType('Examples/ExampleMotionSensor');
motionSensors.subscribeToEvent('motion');
motionSensors.on('event', function(resourceID, eventName, eventData) {
    if(eventName == 'motion') {
        console.log('Saw a motion event from resource', resourceID);
    }
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_subscribeToState" class="method item">
    <h3 class="name"><code>subscribeToState</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>property</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1624"><code>src&#x2F;core&#x2F;peer.js:1624</code></a>
        </p>



    </div>

    <div class="description">
        <p>This method wraps the subscribeToResourceState method
defined by DeviceJSPeer</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">property</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The type of property to subscribe to</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>var lights = dev$.selectByType('Examples/ExampleLight');
lights.subscribeToState('power');
lights.on('state', function(resourceID, stateName, stateData) {
    console.log('Resource', resourceID, 'changed its power state to', stateData);
});
</code></pre>

            </div>
        </div>
</div>
<div id="method_unsubscribe" class="method item">
    <h3 class="name"><code>unsubscribe</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>subscriptionID</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/src_core_peer.js.html#l1644"><code>src&#x2F;core&#x2F;peer.js:1644</code></a>
        </p>



    </div>

    <div class="description">
        <p>This method wraps the unsubscribe method
defined by DeviceJSPeer</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">subscriptionID</code>
                        <span class="type">String</span>


                    <div class="param-description">
                        <p>The id of the subscription to cancel obtained from a previous call to subscribe()</p>

                    </div>

                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Promise</span>:
            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>var motionSensors = dev$.selectByType('Examples/ExampleMotionSensor');
var subscriptionID
motionSensors.subscribeToEvent('motion').then(function(result) {
    subscriptionID = result.id
})

motionSensors.on('event', function(resourceID, eventName, eventData) {
    if(eventName == 'motion') {
        console.log('Saw a motion event from resource', resourceID);
        motionSensors.unsubscribe(subscriptionID); // tell server to stop sending these events to me
    }
});
</code></pre>

            </div>
        </div>
</div>
            </div>



            <div id="events" class="api-class-tabpanel">
                <h2 class="off-left">Events</h2>

                    <div id="event_discover" class="events item">
                        <h3 class="name"><code>discover</code></h3>
                        <span class="type"></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                    <p>
                                    Defined in
                            <a href="../files/src_core_peer.js.html#l1593"><code>src&#x2F;core&#x2F;peer.js:1593</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>This is fired when a resource in this selection
                    is discovered</p>
                    
                        </div>
                    
                            <div class="params">
                                <h4>Event Payload:</h4>
                    
                                <ul class="params-list">
                                    <li class="param">
                                            <code class="param-name">resourceID</code>
                                            <span class="type">String</span>
                    
                    
                                        <div class="param-description">
                                            <p>The source of this event</p>
                    
                                        </div>
                    
                                    </li>
                                    <li class="param">
                                            <code class="param-name">resourceInfo</code>
                                            <span class="type">Object</span>
                    
                    
                                        <div class="param-description">
                                            <p>Information about the discovered resource</p>
                    
                                        </div>
                    
                                    </li>
                                </ul>
                            </div>
                    
                    
                    </div>
                    <div id="event_event" class="events item">
                        <h3 class="name"><code>event</code></h3>
                        <span class="type"></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                    <p>
                                    Defined in
                            <a href="../files/src_core_peer.js.html#l1583"><code>src&#x2F;core&#x2F;peer.js:1583</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>This is fired when a resource in this selection
                    publishes an event</p>
                    
                        </div>
                    
                            <div class="params">
                                <h4>Event Payload:</h4>
                    
                                <ul class="params-list">
                                    <li class="param">
                                            <code class="param-name">resourceID</code>
                                            <span class="type">String</span>
                    
                    
                                        <div class="param-description">
                                            <p>The source of this event</p>
                    
                                        </div>
                    
                                    </li>
                                    <li class="param">
                                            <code class="param-name">type</code>
                                            <span class="type">String</span>
                    
                    
                                        <div class="param-description">
                                            <p>The type of event</p>
                    
                                        </div>
                    
                                    </li>
                                    <li class="param">
                                            <code class="param-name">data</code>
                                            <span class="type">Object</span>
                    
                    
                                        <div class="param-description">
                                            <p>Any data associated with the event</p>
                    
                                        </div>
                    
                                    </li>
                                </ul>
                            </div>
                    
                    
                    </div>
                    <div id="event_state" class="events item">
                        <h3 class="name"><code>state</code></h3>
                        <span class="type"></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                    <p>
                                    Defined in
                            <a href="../files/src_core_peer.js.html#l1573"><code>src&#x2F;core&#x2F;peer.js:1573</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>This is fired when a resource in this selection
                    publishes a state change</p>
                    
                        </div>
                    
                            <div class="params">
                                <h4>Event Payload:</h4>
                    
                                <ul class="params-list">
                                    <li class="param">
                                            <code class="param-name">resourceID</code>
                                            <span class="type">String</span>
                    
                    
                                        <div class="param-description">
                                            <p>The source of this event</p>
                    
                                        </div>
                    
                                    </li>
                                    <li class="param">
                                            <code class="param-name">property</code>
                                            <span class="type">String</span>
                    
                    
                                        <div class="param-description">
                                            <p>The property that has changed</p>
                    
                                        </div>
                    
                                    </li>
                                    <li class="param">
                                            <code class="param-name">value</code>
                                            <span class="type">Object</span>
                    
                    
                                        <div class="param-description">
                                            <p>The new value of this property</p>
                    
                                        </div>
                    
                                    </li>
                                </ul>
                            </div>
                    
                    
                    </div>
            </div>
    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
